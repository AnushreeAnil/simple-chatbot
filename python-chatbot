import random

jokes = [
    "Why did the computer show up at work late? It had a hard drive!",
    "Why do programmers prefer dark mode? Because light attracts bugs!",
    "Why was the cell phone wearing glasses? It lost its contacts!",
    "Why did the developer go broke? Because he used up all his cache!",
    "Why was the JavaScript developer sad? Because he didn't Node how to Express himself."
]

weather_joke = "Why don't meteorologists trust atoms? Because they make up everything!"

joke_index = 0

def get_joke():
    global joke_index
    joke = jokes[joke_index]
    joke_index = (joke_index + 1) % len(jokes)
    return joke

def ask_hows_it_going():
    print("Chatbot: Hey, how's it going?")
    user_response = input("You: ").lower()
    if any(word in user_response for word in ["good", "fine", "great", "well", "awesome", "ok"]):
        return "That's awesome to hear!"
    elif any(word in user_response for word in ["bad", "not good", "sad", "tired", "not well", "not ok"]):
        return "I'm sorry to hear that. I hope things get better soon."
    else:
        return "Thanks for sharing!"

def detect_mood():
    print("Chatbot: I want to know how you are feeling today. Please answer my questions.")
    questions = [
        "Chatbot: Are you feeling happy today? (yes/no/maybe)",
        "Chatbot: Do you feel energetic? (yes/no/maybe)",
        "Chatbot: Are you feeling stressed? (yes/no/maybe)"
    ]
    answers = []
    for q in questions:
        ans = input(q + "\nYou: ").strip().lower()
        while ans not in ['yes', 'no', 'maybe']:
            print("Chatbot: Please answer with yes, no, or maybe.")
            ans = input(q + "\nYou: ").strip().lower()
        answers.append(ans)

    happy = answers[0]
    energetic = answers[1]
    stressed = answers

    if happy == 'yes' and energetic == 'yes' and stressed != 'yes':
        mood = "You seem to be in a great mood! Keep it up!"
    elif stressed == 'yes':
        mood = "You seem stressed. Remember to take breaks and relax."
    elif happy == 'no':
        mood = "It seems you might be feeling down. I'm here if you want to chat."
    elif 'maybe' in answers:
        mood = "Thanks for sharing. It's okay to feel unsure sometimes."
    else:
        mood = "Thanks for sharing how you feel."
    return mood

def respond(user_input):
    user_input = user_input.lower().strip()

    greetings = ['hello', 'hi', 'hey', 'good morning', 'good afternoon']
    if any(greet in user_input for greet in greetings):
        reply = random.choice([
            "Hello! How can I help you?",
            "Hi there! What can I do for you?",
            "Hey! How's it going?"
        ])
        if "how's it going" in reply:
            print(f"Chatbot: {reply}")
            return ask_hows_it_going()
        else:
            return reply
    elif "your name" in user_input:
        return "I am your friendly chatbot."
    elif "my name is" in user_input:
        name = user_input.split("my name is")[-1].strip().capitalize()
        return f"Nice to meet you, {name}!"
    elif user_input in ["how are you", "how r you", "how r u", "how are you?", "how's it going"]:
        return "I'm doing well, thank you! How about you?"
    elif user_input in ["i am fine", "i am good", "i'm fine", "i'm good"]:
        return "Glad to hear that! What can I do for you?"
    elif "thank you" in user_input or "thanks" in user_input:
        return random.choice([
            "You're welcome!",
            "No problem!",
            "Anytime!",
            "Glad I could help!"
        ])
    elif "weather" in user_input:
        return weather_joke + " But seriously, I can't check the weather yet, I'm still learning!"
    elif "joke" in user_input:
        joke = get_joke()
        return joke
    elif user_input in ["lol", "haha", "hehe", "funny", "good one", "lmao", "rofl"]:
        return "Glad to hear that!"
    elif "mood" in user_input:
        return detect_mood()
    else:
        return "Sorry, I didn't understand that. You can ask me to tell a joke, ask about the weather, or check your mood."

print("Chatbot: Hello! Type 'exit' to end the chat.")

while True:
    user_query = input("You: ")
    if user_query.lower() == "exit":
        print("Chatbot: Goodbye!")
        break
    response = respond(user_query)
    print("Chatbot:", response)
